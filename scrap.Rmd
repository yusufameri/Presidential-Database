---
title: "Election Scraping"
author: "Yusuf Ameri"
date: "11/4/2016"
output: html_document
---

```{r libraries}
library(rvest)
library(dplyr)
library(tidyr)
library(magrittr)
```

```{r scrape}
library(htmltab)

url <- "https://www.archives.gov/federal-register/electoral-college/scores.html"

# Access a table via below xpath
# new_xpath <- '//tr[(((count(preceding-sibling::*) + 1) = 105) and parent::*)]//table'

# xpath follows a specific string concatination formula. Each table is every other number from 1
# to 105. Concatinating base1, a number, and base2, allows us to access said table on election
table_numbers <- seq(from=1, to=105, by=2)
base1 <- '//tr[(((count(preceding-sibling::*) + 1) = '
base2 <- ') and parent::*)]//table'

# create xpaths for each table to scrape
x_path <- 
for(var in table_numbers) {
  x_path <- paste(base1,var,base2,sep="")
}

elections <- htmltab(doc = url, which = x_path)
head(elections)
```